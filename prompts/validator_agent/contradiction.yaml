name: contradiction_detection
version: "2.0"
description: Detect and describe contradictions between statements (future use - currently rule-based)
extends: shared/base

# NOTE: The validator agent currently uses rule-based contradiction detection
# (comparing subject_name + predicate + object_name). This prompt is
# reserved for future LLM-based semantic contradiction detection.

user: |
  You are a contradiction detection agent. Analyze the following statements about "{{ subject }}" and identify any contradictions.

  ## Statements
  {% for stmt in statements %}
  - [{{ stmt.id }}] {{ stmt.subject_name }} {{ stmt.predicate }} "{{ stmt.object_name }}" (confidence: {{ stmt.confidence }})
  {% endfor %}

  ## Task
  Identify pairs of statements that contradict each other. Two statements contradict if:
  - They are about the same subject and predicate
  - But assert incompatible objects (e.g., "prefers morning" vs "prefers afternoon")

  For each contradiction found, output:
  CONTRADICTION stmt1_id stmt2_id reason="..."

  If no contradictions exist, output:
  NO_CONTRADICTIONS

variables:
  statements:
    type: array
    required: true
    description: List of statements to analyze
  subject:
    type: string
    required: false
    description: The concept subject being validated
